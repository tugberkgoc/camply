\begin{quote}
Get a stream as a string, buffer, or array \end{quote}


\subsection*{Install}


\begin{DoxyCode}
$ npm install --save get-stream
\end{DoxyCode}


\subsection*{Usage}


\begin{DoxyCode}
const fs = require('fs');
const getStream = require('get-stream');
const stream = fs.createReadStream('unicorn.txt');

getStream(stream).then(str => \{
  console.log(str);
  /*
                ,,))))))));,
             \_\_)))))))))))))),
  \(\backslash\)|/       -\(\backslash\)(((((''''((((((((.
  -*-==//////((''  .     `)))))),
  /|\(\backslash\)      ))| o    ;-.    '(((((                                  ,(,
           ( `|    /  )    ;))))'                               ,\_))^;(~
              |   |   |   ,))((((\_     \_\_\_\_\_------~~~-.        %,;(;(>';'~
              o\_);   ;    )))(((` ~---~  `::           \(\backslash\)      %%~~)(v;(`('~
                    ;    ''''````         `:       `:::|\(\backslash\),\_\_,%%    );`'; ~
                   |   \_                )     /      `:|`----'     `-'
             \_\_\_\_\_\_/\(\backslash\)/~    |                 /        /
           /~;;.\_\_\_\_/;;'  /          \_\_\_--,-(   `;;;/
          / //  \_;\_\_\_\_\_\_;'------~~~~~    /;;/\(\backslash\)    /
         //  | |                        / ;   \(\backslash\);;,\(\backslash\)
        (<\_  | ;                      /',/-----'  \_>
         \(\backslash\)\_| ||\_                     //~;~~~~~~~~~
             `\(\backslash\)\_|                   (,~~
\(\backslash\)
                                      ~~
  */
\});
\end{DoxyCode}


\subsection*{A\+PI}

The methods returns a promise that is resolved when the {\ttfamily end} event fires on the stream, indicating that there is no more data to be read. The stream is switched to flowing mode.

\subsubsection*{get\+Stream(stream, \mbox{[}options\mbox{]})}

Get the {\ttfamily stream} as a string.

\paragraph*{options}

\subparagraph*{encoding}

Type\+: {\ttfamily string}~\newline
 Default\+: {\ttfamily utf8}

\href{https://nodejs.org/api/buffer.html#buffer_buffer}{\tt Encoding} of the incoming stream.

\subparagraph*{max\+Buffer}

Type\+: {\ttfamily number}~\newline
 Default\+: {\ttfamily Infinity}

Maximum length of the returned string. If it exceeds this value before the stream ends, the promise will be rejected.

\subsubsection*{get\+Stream.\+buffer(stream, \mbox{[}options\mbox{]})}

Get the {\ttfamily stream} as a buffer.

It honors the {\ttfamily max\+Buffer} option as above, but it refers to byte length rather than string length.

\subsubsection*{get\+Stream.\+array(stream, \mbox{[}options\mbox{]})}

Get the {\ttfamily stream} as an array of values.

It honors both the {\ttfamily max\+Buffer} and {\ttfamily encoding} options. The behavior changes slightly based on the encoding chosen\+:


\begin{DoxyItemize}
\item When {\ttfamily encoding} is unset, it assumes an \href{https://nodesource.com/blog/understanding-object-streams/}{\tt object mode stream} and collects values emitted from {\ttfamily stream} unmodified. In this case {\ttfamily max\+Buffer} refers to the number of items in the array (not the sum of their sizes).
\item When {\ttfamily encoding} is set to {\ttfamily buffer}, it collects an array of buffers. {\ttfamily max\+Buffer} refers to the summed byte lengths of every buffer in the array.
\item When {\ttfamily encoding} is set to anything else, it collects an array of strings. {\ttfamily max\+Buffer} refers to the summed character lengths of every string in the array.
\end{DoxyItemize}

\subsection*{Errors}

If the input stream emits an {\ttfamily error} event, the promise will be rejected with the error. The buffered data will be attached to the {\ttfamily buffered\+Data} property of the error.


\begin{DoxyCode}
getStream(streamThatErrorsAtTheEnd('unicorn'))
  .catch(err => console.log(err.bufferedData));
// unicorn
\end{DoxyCode}


\subsection*{F\+AQ}

\subsubsection*{How is this different from \href{https://github.com/maxogden/concat-stream}{\tt {\ttfamily concat-\/stream}}?}

This module accepts a stream instead of being one and returns a promise instead of using a callback. The A\+PI is simpler and it only supports returning a string, buffer, or array. It doesn\textquotesingle{}t have a fragile type inference. You explicitly choose what you want. And it doesn\textquotesingle{}t depend on the huge {\ttfamily readable-\/stream} package.

\subsection*{Related}


\begin{DoxyItemize}
\item \href{https://github.com/sindresorhus/get-stdin}{\tt get-\/stdin} -\/ Get stdin as a string or buffer
\end{DoxyItemize}

\subsection*{License}

M\+IT Â© \href{https://sindresorhus.com}{\tt Sindre Sorhus} 