\begin{quote}
A better \href{https://nodejs.org/api/child_process.html}{\tt {\ttfamily child\+\_\+process}} \end{quote}


\subsection*{Why}


\begin{DoxyItemize}
\item Promise interface.
\item \href{https://github.com/sindresorhus/strip-eof}{\tt Strips E\+OF} from the output so you don\textquotesingle{}t have to {\ttfamily stdout.\+trim()}.
\item Supports \href{https://en.wikipedia.org/wiki/Shebang_(Unix)}{\tt shebang} binaries cross-\/platform.
\item \href{https://github.com/IndigoUnited/node-cross-spawn#why}{\tt Improved Windows support.}
\item Higher max buffer. 10 MB instead of 200 KB.
\item \href{#preferlocal}{\tt Executes locally installed binaries by name.}
\item \href{#cleanup}{\tt Cleans up spawned processes when the parent process dies.}
\end{DoxyItemize}

\subsection*{Install}


\begin{DoxyCode}
$ npm install --save execa
\end{DoxyCode}


\subsection*{Usage}


\begin{DoxyCode}
const execa = require('execa');

execa('echo', ['unicorns']).then(result => \{
  console.log(result.stdout);
  //=> 'unicorns'
\});

// pipe the child process stdout to the current stdout
execa('echo', ['unicorns']).stdout.pipe(process.stdout);

execa.shell('echo unicorns').then(result => \{
  console.log(result.stdout);
  //=> 'unicorns'
\});

// example of catching an error
execa.shell('exit 3').catch(error => \{
  console.log(error);
  /*
  \{
    message: 'Command failed: /bin/sh -c exit 3'
    killed: false,
    code: 3,
    signal: null,
    cmd: '/bin/sh -c exit 3',
    stdout: '',
    stderr: '',
    timedOut: false
  \}
  */
\});
\end{DoxyCode}


\subsection*{A\+PI}

\subsubsection*{execa(file, \mbox{[}arguments\mbox{]}, \mbox{[}options\mbox{]})}

Execute a file.

Think of this as a mix of {\ttfamily child\+\_\+process.\+exec\+File} and {\ttfamily child\+\_\+process.\+spawn}.

Returns a \href{https://nodejs.org/api/child_process.html#child_process_class_childprocess}{\tt {\ttfamily child\+\_\+process} instance}, which is enhanced to also be a {\ttfamily Promise} for a result {\ttfamily Object} with {\ttfamily stdout} and {\ttfamily stderr} properties.

\subsubsection*{execa.\+stdout(file, \mbox{[}arguments\mbox{]}, \mbox{[}options\mbox{]})}

Same as {\ttfamily execa()}, but returns only {\ttfamily stdout}.

\subsubsection*{execa.\+stderr(file, \mbox{[}arguments\mbox{]}, \mbox{[}options\mbox{]})}

Same as {\ttfamily execa()}, but returns only {\ttfamily stderr}.

\subsubsection*{execa.\+shell(command, \mbox{[}options\mbox{]})}

Execute a command through the system shell. Prefer {\ttfamily execa()} whenever possible, as it\textquotesingle{}s both faster and safer.

Returns a \href{https://nodejs.org/api/child_process.html#child_process_class_childprocess}{\tt {\ttfamily child\+\_\+process} instance}.

The {\ttfamily child\+\_\+process} instance is enhanced to also be promise for a result object with {\ttfamily stdout} and {\ttfamily stderr} properties.

\subsubsection*{execa.\+sync(file, \mbox{[}arguments\mbox{]}, \mbox{[}options\mbox{]})}

Execute a file synchronously.

Returns the same result object as \href{https://nodejs.org/api/child_process.html#child_process_child_process_spawnsync_command_args_options}{\tt {\ttfamily child\+\_\+process.\+spawn\+Sync}}.

This method throws an {\ttfamily Error} if the command fails.

\subsubsection*{execa.\+shell\+Sync(file, \mbox{[}options\mbox{]})}

Execute a command synchronously through the system shell.

Returns the same result object as \href{https://nodejs.org/api/child_process.html#child_process_child_process_spawnsync_command_args_options}{\tt {\ttfamily child\+\_\+process.\+spawn\+Sync}}.

\subsubsection*{options}

Type\+: {\ttfamily Object}

\paragraph*{cwd}

Type\+: {\ttfamily string}~\newline
 Default\+: {\ttfamily process.\+cwd()}

Current working directory of the child process.

\paragraph*{env}

Type\+: {\ttfamily Object}~\newline
 Default\+: {\ttfamily process.\+env}

Environment key-\/value pairs. Extends automatically from {\ttfamily process.\+env}. Set {\ttfamily extend\+Env} to {\ttfamily false} if you don\textquotesingle{}t want this.

\paragraph*{extend\+Env}

Type\+: {\ttfamily boolean}~\newline
 Default\+: {\ttfamily true}

Set to {\ttfamily false} if you don\textquotesingle{}t want to extend the environment variables when providing the {\ttfamily env} property.

\paragraph*{argv0}

Type\+: {\ttfamily string}

Explicitly set the value of {\ttfamily argv\mbox{[}0\mbox{]}} sent to the child process. This will be set to {\ttfamily command} or {\ttfamily file} if not specified.

\paragraph*{stdio}

Type\+: {\ttfamily Array} {\ttfamily string}~\newline
 Default\+: {\ttfamily pipe}

Child\textquotesingle{}s \href{https://nodejs.org/api/child_process.html#child_process_options_stdio}{\tt stdio} configuration.

\paragraph*{detached}

Type\+: {\ttfamily boolean}

Prepare child to run independently of its parent process. Specific behavior \href{https://nodejs.org/api/child_process.html#child_process_options_detached}{\tt depends on the platform}.

\paragraph*{uid}

Type\+: {\ttfamily number}

Sets the user identity of the process.

\paragraph*{gid}

Type\+: {\ttfamily number}

Sets the group identity of the process.

\paragraph*{shell}

Type\+: {\ttfamily boolean} {\ttfamily string}~\newline
 Default\+: {\ttfamily false}

If {\ttfamily true}, runs {\ttfamily command} inside of a shell. Uses {\ttfamily /bin/sh} on U\+N\+IX and {\ttfamily cmd.\+exe} on Windows. A different shell can be specified as a string. The shell should understand the {\ttfamily -\/c} switch on U\+N\+IX or {\ttfamily /d /s /c} on Windows.

\paragraph*{strip\+Eof}

Type\+: {\ttfamily boolean}~\newline
 Default\+: {\ttfamily true}

\href{https://github.com/sindresorhus/strip-eof}{\tt Strip E\+OF} (last newline) from the output.

\paragraph*{prefer\+Local}

Type\+: {\ttfamily boolean}~\newline
 Default\+: {\ttfamily true}

Prefer locally installed binaries when looking for a binary to execute.~\newline
 If you {\ttfamily \$ npm install foo}, you can then `execa(\textquotesingle{}foo')\`{}.

\paragraph*{local\+Dir}

Type\+: {\ttfamily string}~\newline
 Default\+: {\ttfamily process.\+cwd()}

Preferred path to find locally installed binaries in (use with {\ttfamily prefer\+Local}).

\paragraph*{input}

Type\+: {\ttfamily string} {\ttfamily Buffer} {\ttfamily stream.\+Readable}

Write some input to the {\ttfamily stdin} of your binary.~\newline
 Streams are not allowed when using the synchronous methods.

\paragraph*{reject}

Type\+: {\ttfamily boolean}~\newline
 Default\+: {\ttfamily true}

Setting this to {\ttfamily false} resolves the promise with the error instead of rejecting it.

\paragraph*{cleanup}

Type\+: {\ttfamily boolean}~\newline
 Default\+: {\ttfamily true}

Keep track of the spawned process and {\ttfamily kill} it when the parent process exits.

\paragraph*{encoding}

Type\+: {\ttfamily string}~\newline
 Default\+: {\ttfamily utf8}

Specify the character encoding used to decode the {\ttfamily stdout} and {\ttfamily stderr} output.

\paragraph*{timeout}

Type\+: {\ttfamily number}~\newline
 Default\+: {\ttfamily 0}

If timeout is greater than {\ttfamily 0}, the parent will send the signal identified by the {\ttfamily kill\+Signal} property (the default is {\ttfamily S\+I\+G\+T\+E\+RM}) if the child runs longer than timeout milliseconds.

\paragraph*{max\+Buffer}

Type\+: {\ttfamily number}~\newline
 Default\+: {\ttfamily 10000000} (10\+MB)

Largest amount of data in bytes allowed on {\ttfamily stdout} or {\ttfamily stderr}.

\paragraph*{kill\+Signal}

Type\+: {\ttfamily string} {\ttfamily number}~\newline
 Default\+: {\ttfamily S\+I\+G\+T\+E\+RM}

Signal value to be used when the spawned process will be killed.

\paragraph*{stdin}

Type\+: {\ttfamily string} {\ttfamily number} {\ttfamily Stream} {\ttfamily undefined} {\ttfamily null}~\newline
 Default\+: {\ttfamily pipe}

Same options as \href{https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html#child_process_options_stdio}{\tt {\ttfamily stdio}}.

\paragraph*{stdout}

Type\+: {\ttfamily string} {\ttfamily number} {\ttfamily Stream} {\ttfamily undefined} {\ttfamily null}~\newline
 Default\+: {\ttfamily pipe}

Same options as \href{https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html#child_process_options_stdio}{\tt {\ttfamily stdio}}.

\paragraph*{stderr}

Type\+: {\ttfamily string} {\ttfamily number} {\ttfamily Stream} {\ttfamily undefined} {\ttfamily null}~\newline
 Default\+: {\ttfamily pipe}

Same options as \href{https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html#child_process_options_stdio}{\tt {\ttfamily stdio}}.

\subsection*{Tips}

\subsubsection*{Save and pipe output from a child process}

Let\textquotesingle{}s say you want to show the output of a child process in real-\/time while also saving it to a variable.


\begin{DoxyCode}
const execa = require('execa');
const getStream = require('get-stream');

const stream = execa('echo', ['foo']).stdout;

stream.pipe(process.stdout);

getStream(stream).then(value => \{
  console.log('child output:', value);
\});
\end{DoxyCode}


\subsection*{License}

M\+IT Â© \href{https://sindresorhus.com}{\tt Sindre Sorhus} 