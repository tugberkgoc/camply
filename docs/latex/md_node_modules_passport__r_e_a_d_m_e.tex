\href{http://passportjs.org}{\tt }

\section*{Passport}

\href{https://travis-ci.org/jaredhanson/passport}{\tt } \href{https://coveralls.io/r/jaredhanson/passport}{\tt } \href{https://codeclimate.com/github/jaredhanson/passport}{\tt } \href{https://david-dm.org/jaredhanson/passport}{\tt } \href{https://gratipay.com/jaredhanson/}{\tt }

Passport is \href{http://expressjs.com/}{\tt Express}-\/compatible authentication middleware for \href{http://nodejs.org/}{\tt Node.\+js}.

Passport\textquotesingle{}s sole purpose is to authenticate requests, which it does through an extensible set of plugins known as {\itshape strategies}. Passport does not mount routes or assume any particular database schema, which maximizes flexibility and allows application-\/level decisions to be made by the developer. The A\+PI is simple\+: you provide Passport a request to authenticate, and Passport provides hooks for controlling what occurs when authentication succeeds or fails.

\subsection*{Install}


\begin{DoxyCode}
$ npm install passport
\end{DoxyCode}


\subsection*{Usage}

\paragraph*{Strategies}

Passport uses the concept of strategies to authenticate requests. Strategies can range from verifying username and password credentials, delegated authentication using \href{http://oauth.net/}{\tt O\+Auth} (for example, via \href{http://www.facebook.com/}{\tt Facebook} or \href{http://twitter.com/}{\tt Twitter}), or federated authentication using \href{http://openid.net/}{\tt Open\+ID}.

Before authenticating requests, the strategy (or strategies) used by an application must be configured.


\begin{DoxyCode}
passport.use(new LocalStrategy(
  function(username, password, done) \{
    User.findOne(\{ username: username \}, function (err, user) \{
      if (err) \{ return done(err); \}
      if (!user) \{ return done(null, false); \}
      if (!user.verifyPassword(password)) \{ return done(null, false); \}
      return done(null, user);
    \});
  \}
));
\end{DoxyCode}


There are 300+ strategies. Find the ones you want at\+: \href{http://passportjs.org}{\tt passportjs.\+org}

\paragraph*{Sessions}

Passport will maintain persistent login sessions. In order for persistent sessions to work, the authenticated user must be serialized to the session, and deserialized when subsequent requests are made.

Passport does not impose any restrictions on how your user records are stored. Instead, you provide functions to Passport which implements the necessary serialization and deserialization logic. In a typical application, this will be as simple as serializing the user ID, and finding the user by ID when deserializing.


\begin{DoxyCode}
passport.serializeUser(function(user, done) \{
  done(null, user.id);
\});

passport.deserializeUser(function(id, done) \{
  User.findById(id, function (err, user) \{
    done(err, user);
  \});
\});
\end{DoxyCode}


\paragraph*{Middleware}

To use Passport in an \href{http://expressjs.com/}{\tt Express} or \href{http://senchalabs.github.com/connect/}{\tt Connect}-\/based application, configure it with the required {\ttfamily passport.\+initialize()} middleware. If your application uses persistent login sessions (recommended, but not required), {\ttfamily passport.\+session()} middleware must also be used.


\begin{DoxyCode}
var app = express();
app.use(require('serve-static')(\_\_dirname + '/../../public'));
app.use(require('cookie-parser')());
app.use(require('body-parser').urlencoded(\{ extended: true \}));
app.use(require('express-session')(\{ secret: 'keyboard cat', resave: true, saveUninitialized: true \}));
app.use(passport.initialize());
app.use(passport.session());
\end{DoxyCode}


\paragraph*{Authenticate Requests}

Passport provides an {\ttfamily authenticate()} function, which is used as route middleware to authenticate requests.


\begin{DoxyCode}
app.post('/login', 
  passport.authenticate('local', \{ failureRedirect: '/login' \}),
  function(req, res) \{
    res.redirect('/');
  \});
\end{DoxyCode}


\subsection*{Strategies}

Passport has a comprehensive set of {\bfseries over 300} authentication strategies covering social networking, enterprise integration, A\+PI services, and more.

\subsection*{Search all strategies}

There is a {\bfseries Strategy Search} at \href{http://passportjs.org}{\tt passportjs.\+org}

The following table lists commonly used strategies\+:

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Strategy  }&\textbf{ Protocol  }&\textbf{ Developer   }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ Strategy  }&\textbf{ Protocol  }&\textbf{ Developer   }\\\cline{1-3}
\endhead
\href{https://github.com/jaredhanson/passport-local}{\tt Local}  &H\+T\+ML form  &\href{https://github.com/jaredhanson}{\tt Jared Hanson}   \\\cline{1-3}
\href{https://github.com/jaredhanson/passport-openid}{\tt Open\+ID}  &Open\+ID  &\href{https://github.com/jaredhanson}{\tt Jared Hanson}   \\\cline{1-3}
\href{https://github.com/jaredhanson/passport-browserid}{\tt Browser\+ID}  &Browser\+ID  &\href{https://github.com/jaredhanson}{\tt Jared Hanson}   \\\cline{1-3}
\href{https://github.com/jaredhanson/passport-facebook}{\tt Facebook}  &O\+Auth 2.\+0  &\href{https://github.com/jaredhanson}{\tt Jared Hanson}   \\\cline{1-3}
\href{https://github.com/jaredhanson/passport-google}{\tt Google}  &Open\+ID  &\href{https://github.com/jaredhanson}{\tt Jared Hanson}   \\\cline{1-3}
\href{https://github.com/jaredhanson/passport-google-oauth}{\tt Google}  &O\+Auth / O\+Auth 2.\+0  &\href{https://github.com/jaredhanson}{\tt Jared Hanson}   \\\cline{1-3}
\href{https://github.com/jaredhanson/passport-twitter}{\tt Twitter}  &O\+Auth  &\href{https://github.com/jaredhanson}{\tt Jared Hanson}   \\\cline{1-3}
\href{https://github.com/AzureAD/passport-azure-ad}{\tt Azure Active Directory}  &O\+Auth 2.\+0 / Open\+ID / S\+A\+ML  &\href{https://github.com/azuread}{\tt Azure}   \\\cline{1-3}
\end{longtabu}


\subsection*{Examples}


\begin{DoxyItemize}
\item For a complete, working example, refer to the \href{https://github.com/passport/express-4.x-local-example}{\tt example} that uses \href{https://github.com/jaredhanson/passport-local}{\tt passport-\/local}.
\item {\bfseries Local Strategy}\+: Refer to the following tutorials for setting up user authentication via Local\+Strategy ({\ttfamily passport-\/local})\+:
\begin{DoxyItemize}
\item Mongo
\begin{DoxyItemize}
\item Express v3x -\/ \href{http://mherman.org/blog/2016/09/25/node-passport-and-postgres/#.V-govpMrJE5}{\tt Tutorial} / \href{https://github.com/mjhea0/passport-local-knex}{\tt working example}
\item Express v4x -\/ \href{http://mherman.org/blog/2015/01/31/local-authentication-with-passport-and-express-4/}{\tt Tutorial} / \href{https://github.com/mjhea0/passport-local-express4}{\tt working example}
\end{DoxyItemize}
\item Postgres
\begin{DoxyItemize}
\item \href{http://mherman.org/blog/2015/01/31/local-authentication-with-passport-and-express-4/}{\tt Tutorial} / \href{https://github.com/mjhea0/passport-local-express4}{\tt working example}
\end{DoxyItemize}
\end{DoxyItemize}
\item {\bfseries Social Authentication}\+: Refer to the following tutorials for setting up various social authentication strategies\+:
\begin{DoxyItemize}
\item Express v3x -\/ \href{http://mherman.org/blog/2013/11/10/social-authentication-with-passport-dot-js/}{\tt Tutorial} / \href{https://github.com/mjhea0/passport-examples}{\tt working example}
\item Express v4x -\/ \href{http://mherman.org/blog/2015/09/26/social-authentication-in-node-dot-js-with-passport}{\tt Tutorial} / \href{https://github.com/mjhea0/passport-social-auth}{\tt working example}
\end{DoxyItemize}
\end{DoxyItemize}

\subsection*{Related Modules}


\begin{DoxyItemize}
\item \href{https://github.com/jaredhanson/locomotive}{\tt Locomotive} — Powerful M\+VC web framework
\item \href{https://github.com/jaredhanson/oauthorize}{\tt O\+Authorize} — O\+Auth service provider toolkit
\item \href{https://github.com/jaredhanson/oauth2orize}{\tt O\+Auth2orize} — O\+Auth 2.\+0 authorization server toolkit
\item \href{https://github.com/jaredhanson/connect-ensure-login}{\tt connect-\/ensure-\/login} — middleware to ensure login sessions
\end{DoxyItemize}

The \href{https://github.com/jaredhanson/passport/wiki/Modules}{\tt modules} page on the \href{https://github.com/jaredhanson/passport/wiki}{\tt wiki} lists other useful modules that build upon or integrate with Passport.

\subsection*{Tests}


\begin{DoxyCode}
$ npm install
$ make test
\end{DoxyCode}


\subsection*{Credits}


\begin{DoxyItemize}
\item \href{http://github.com/jaredhanson}{\tt Jared Hanson}
\end{DoxyItemize}

\subsection*{Supporters}

This project is supported by  \href{https://auth0.com}{\tt Auth0}

\subsection*{License}

\href{http://opensource.org/licenses/MIT}{\tt The M\+IT License}

Copyright (c) 2011-\/2015 Jared Hanson $<$\href{http://jaredhanson.net/}{\tt http\+://jaredhanson.\+net/}$>$ 