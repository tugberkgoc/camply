node-\/ftp is an F\+TP client module for \href{http://nodejs.org/}{\tt node.\+js} that provides an asynchronous interface for communicating with an F\+TP server.

\section*{Requirements }


\begin{DoxyItemize}
\item \href{http://nodejs.org/}{\tt node.\+js} -- v0.\+8.\+0 or newer
\end{DoxyItemize}

\section*{Install }

\begin{DoxyVerb}npm install ftp
\end{DoxyVerb}


\section*{Examples }


\begin{DoxyItemize}
\item Get a directory listing of the current (remote) working directory\+:
\end{DoxyItemize}


\begin{DoxyCode}
var Client = require('ftp');

var c = new Client();
c.on('ready', function() \{
  c.list(function(err, list) \{
    if (err) throw err;
    console.dir(list);
    c.end();
  \});
\});
// connect to localhost:21 as anonymous
c.connect();
\end{DoxyCode}



\begin{DoxyItemize}
\item Download remote file \textquotesingle{}foo.\+txt\textquotesingle{} and save it to the local file system\+:
\end{DoxyItemize}


\begin{DoxyCode}
var Client = require('ftp');
var fs = require('fs');

var c = new Client();
c.on('ready', function() \{
  c.get('foo.txt', function(err, stream) \{
    if (err) throw err;
    stream.once('close', function() \{ c.end(); \});
    stream.pipe(fs.createWriteStream('foo.local-copy.txt'));
  \});
\});
// connect to localhost:21 as anonymous
c.connect();
\end{DoxyCode}



\begin{DoxyItemize}
\item Upload local file \textquotesingle{}foo.\+txt\textquotesingle{} to the server\+:
\end{DoxyItemize}


\begin{DoxyCode}
var Client = require('ftp');
var fs = require('fs');

var c = new Client();
c.on('ready', function() \{
  c.put('foo.txt', 'foo.remote-copy.txt', function(err) \{
    if (err) throw err;
    c.end();
  \});
\});
// connect to localhost:21 as anonymous
c.connect();
\end{DoxyCode}


\section*{A\+PI }

\subsection*{Events }


\begin{DoxyItemize}
\item {\bfseries greeting}($<$ {\itshape string} $>$msg) -\/ Emitted after connection. {\ttfamily msg} is the text the server sent upon connection.
\item {\bfseries ready}() -\/ Emitted when connection and authentication were sucessful.
\item {\bfseries close}($<$ {\itshape boolean} $>$had\+Err) -\/ Emitted when the connection has fully closed.
\item {\bfseries end}() -\/ Emitted when the connection has ended.
\item {\bfseries error}($<$ {\itshape Error} $>$err) -\/ Emitted when an error occurs. In case of protocol-\/level errors, {\ttfamily err} contains a \textquotesingle{}code\textquotesingle{} property that references the related 3-\/digit F\+TP response code.
\end{DoxyItemize}

\subsection*{Methods }

$\ast$$\ast$$\ast$ Note\+: As with the \textquotesingle{}error\textquotesingle{} event, any error objects passed to callbacks will have a \textquotesingle{}code\textquotesingle{} property for protocol-\/level errors.$\ast$$\ast$


\begin{DoxyItemize}
\item $\ast$$\ast$(constructor)$\ast$$\ast$() -\/ Creates and returns a new F\+TP client instance.
\item {\bfseries connect}($<$ {\itshape object} $>$config) -\/ \+\_\+(void)\+\_\+ -\/ Connects to an F\+TP server. Valid config properties\+:
\begin{DoxyItemize}
\item host -\/ {\itshape string} -\/ The hostname or IP address of the F\+TP server. {\bfseries Default\+:} \textquotesingle{}localhost\textquotesingle{}
\item port -\/ {\itshape integer} -\/ The port of the F\+TP server. {\bfseries Default\+:} 21
\item secure -\/ {\itshape mixed} -\/ Set to true for both control and data connection encryption, \textquotesingle{}control\textquotesingle{} for control connection encryption only, or \textquotesingle{}implicit\textquotesingle{} for implicitly encrypted control connection (this mode is deprecated in modern times, but usually uses port 990) {\bfseries Default\+:} false
\item secure\+Options -\/ {\itshape object} -\/ Additional options to be passed to {\ttfamily tls.\+connect()}. {\bfseries Default\+:} (none)
\item user -\/ {\itshape string} -\/ Username for authentication. {\bfseries Default\+:} \textquotesingle{}anonymous\textquotesingle{}
\item password -\/ {\itshape string} -\/ Password for authentication. {\bfseries Default\+:} \textquotesingle{}anonymous@\textquotesingle{}
\item conn\+Timeout -\/ {\itshape integer} -\/ How long (in milliseconds) to wait for the control connection to be established. {\bfseries Default\+:} 10000
\item pasv\+Timeout -\/ {\itshape integer} -\/ How long (in milliseconds) to wait for a P\+A\+SV data connection to be established. {\bfseries Default\+:} 10000
\item keepalive -\/ {\itshape integer} -\/ How often (in milliseconds) to send a \textquotesingle{}dummy\textquotesingle{} (N\+O\+OP) command to keep the connection alive. {\bfseries Default\+:} 10000
\end{DoxyItemize}
\item {\bfseries end}() -\/ \+\_\+(void)\+\_\+ -\/ Closes the connection to the server after any/all enqueued commands have been executed.
\item {\bfseries destroy}() -\/ \+\_\+(void)\+\_\+ -\/ Closes the connection to the server immediately.
\end{DoxyItemize}

\subsubsection*{Required \char`\"{}standard\char`\"{} commands (R\+FC 959)}


\begin{DoxyItemize}
\item {\bfseries list}(\mbox{[}$<$ {\itshape string} $>$path, \mbox{]}\mbox{[}$<$ {\itshape boolean} $>$use\+Compression, \mbox{]}$<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Retrieves the directory listing of {\ttfamily path}. {\ttfamily path} defaults to the current working directory. {\ttfamily use\+Compression} defaults to false. {\ttfamily callback} has 2 parameters\+: $<$ {\itshape Error} $>$err, $<$ {\itshape array} $>$list. {\ttfamily list} is an array of objects with these properties\+: \begin{DoxyVerb}* type - _string_ - A single character denoting the entry type: 'd' for directory, '-' for file (or 'l' for symlink on **\*NIX only**).

* name - _string_ - The name of the entry.

* size - _string_ - The size of the entry in bytes.

* date - _Date_ - The last modified date of the entry.

* rights - _object_ - The various permissions for this entry **(*NIX only)**.

    * user - _string_ - An empty string or any combination of 'r', 'w', 'x'.

    * group - _string_ - An empty string or any combination of 'r', 'w', 'x'.

    * other - _string_ - An empty string or any combination of 'r', 'w', 'x'.

* owner - _string_ - The user name or ID that this entry belongs to **(*NIX only)**.

* group - _string_ - The group name or ID that this entry belongs to **(*NIX only)**.

* target - _string_ - For symlink entries, this is the symlink's target **(*NIX only)**.

* sticky - _boolean_ - True if the sticky bit is set for this entry **(*NIX only)**.
\end{DoxyVerb}

\item {\bfseries get}($<$ {\itshape string} $>$path, \mbox{[}$<$ {\itshape boolean} $>$use\+Compression, \mbox{]}$<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Retrieves a file at {\ttfamily path} from the server. {\ttfamily use\+Compression} defaults to false. {\ttfamily callback} has 2 parameters\+: $<$ {\itshape Error} $>$err, $<$ {\itshape Readable\+Stream} $>$file\+Stream.
\item {\bfseries put}($<$ {\itshape mixed} $>$input, $<$ {\itshape string} $>$dest\+Path, \mbox{[}$<$ {\itshape boolean} $>$use\+Compression, \mbox{]}$<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Sends data to the server to be stored as {\ttfamily dest\+Path}. {\ttfamily input} can be a Readable\+Stream, a Buffer, or a path to a local file. {\ttfamily use\+Compression} defaults to false. {\ttfamily callback} has 1 parameter\+: $<$ {\itshape Error} $>$err.
\item {\bfseries append}($<$ {\itshape mixed} $>$input, $<$ {\itshape string} $>$dest\+Path, \mbox{[}$<$ {\itshape boolean} $>$use\+Compression, \mbox{]}$<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Same as {\bfseries put()}, except if {\ttfamily dest\+Path} already exists, it will be appended to instead of overwritten.
\item {\bfseries rename}($<$ {\itshape string} $>$old\+Path, $<$ {\itshape string} $>$new\+Path, $<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Renames {\ttfamily old\+Path} to {\ttfamily new\+Path} on the server. {\ttfamily callback} has 1 parameter\+: $<$ {\itshape Error} $>$err.
\item {\bfseries logout}($<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Logout the user from the server. {\ttfamily callback} has 1 parameter\+: $<$ {\itshape Error} $>$err.
\item {\bfseries delete}($<$ {\itshape string} $>$path, $<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Deletes a file, {\ttfamily path}, on the server. {\ttfamily callback} has 1 parameter\+: $<$ {\itshape Error} $>$err.
\item {\bfseries cwd}($<$ {\itshape string} $>$path, $<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Changes the current working directory to {\ttfamily path}. {\ttfamily callback} has 2 parameters\+: $<$ {\itshape Error} $>$err, $<$ {\itshape string} $>$current\+Dir. Note\+: {\ttfamily current\+Dir} is only given if the server replies with the path in the response text.
\item {\bfseries abort}($<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Aborts the current data transfer (e.\+g. from get(), put(), or list()). {\ttfamily callback} has 1 parameter\+: $<$ {\itshape Error} $>$err.
\item {\bfseries site}($<$ {\itshape string} $>$command, $<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Sends {\ttfamily command} (e.\+g. \textquotesingle{}C\+H\+M\+OD 755 foo\textquotesingle{}, \textquotesingle{}Q\+U\+O\+TA\textquotesingle{}) using S\+I\+TE. {\ttfamily callback} has 3 parameters\+: $<$ {\itshape Error} $>$err, $<$ {\itshape string $>$response\+Text, $<$ \+\_\+integer} $>$response\+Code.
\item {\bfseries status}($<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Retrieves human-\/readable information about the server\textquotesingle{}s status. {\ttfamily callback} has 2 parameters\+: $<$ {\itshape Error} $>$err, $<$ {\itshape string} $>$status.
\item {\bfseries ascii}($<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Sets the transfer data type to A\+S\+C\+II. {\ttfamily callback} has 1 parameter\+: $<$ {\itshape Error} $>$err.
\item {\bfseries binary}($<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Sets the transfer data type to binary (default at time of connection). {\ttfamily callback} has 1 parameter\+: $<$ {\itshape Error} $>$err.
\end{DoxyItemize}

\subsubsection*{Optional \char`\"{}standard\char`\"{} commands (R\+FC 959)}


\begin{DoxyItemize}
\item {\bfseries mkdir}($<$ {\itshape string} $>$path, \mbox{[}$<$ {\itshape boolean} $>$recursive, \mbox{]}$<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Creates a new directory, {\ttfamily path}, on the server. {\ttfamily recursive} is for enabling a \textquotesingle{}mkdir -\/p\textquotesingle{} algorithm and defaults to false. {\ttfamily callback} has 1 parameter\+: $<$ {\itshape Error} $>$err.
\item {\bfseries rmdir}($<$ {\itshape string} $>$path, \mbox{[}$<$ {\itshape boolean} $>$recursive, \mbox{]}$<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Removes a directory, {\ttfamily path}, on the server. If {\ttfamily recursive}, this call will delete the contents of the directory if it is not empty. {\ttfamily callback} has 1 parameter\+: $<$ {\itshape Error} $>$err.
\item {\bfseries cdup}($<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Changes the working directory to the parent of the current directory. {\ttfamily callback} has 1 parameter\+: $<$ {\itshape Error} $>$err.
\item {\bfseries pwd}($<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Retrieves the current working directory. {\ttfamily callback} has 2 parameters\+: $<$ {\itshape Error} $>$err, $<$ {\itshape string} $>$cwd.
\item {\bfseries system}($<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Retrieves the server\textquotesingle{}s operating system. {\ttfamily callback} has 2 parameters\+: $<$ {\itshape Error} $>$err, $<$ {\itshape string} $>$OS.
\item {\bfseries list\+Safe}(\mbox{[}$<$ {\itshape string} $>$path, \mbox{]}\mbox{[}$<$ {\itshape boolean} $>$use\+Compression, \mbox{]}$<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Similar to list(), except the directory is temporarily changed to {\ttfamily path} to retrieve the directory listing. This is useful for servers that do not handle characters like spaces and quotes in directory names well for the L\+I\+ST command. This function is \char`\"{}optional\char`\"{} because it relies on pwd() being available.
\end{DoxyItemize}

\subsubsection*{Extended commands (R\+FC 3659)}


\begin{DoxyItemize}
\item {\bfseries size}($<$ {\itshape string} $>$path, $<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Retrieves the size of {\ttfamily path}. {\ttfamily callback} has 2 parameters\+: $<$ {\itshape Error} $>$err, $<$ {\itshape integer} $>$num\+Bytes.
\item {\bfseries last\+Mod}($<$ {\itshape string} $>$path, $<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Retrieves the last modified date and time for {\ttfamily path}. {\ttfamily callback} has 2 parameters\+: $<$ {\itshape Error} $>$err, $<$ {\itshape Date} $>$last\+Modified.
\item {\bfseries restart}($<$ {\itshape integer} $>$byte\+Offset, $<$ {\itshape function} $>$callback) -\/ \+\_\+(void)\+\_\+ -\/ Sets the file byte offset for the next file transfer action (get/put) to {\ttfamily byte\+Offset}. {\ttfamily callback} has 1 parameter\+: $<$ {\itshape Error} $>$err. 
\end{DoxyItemize}