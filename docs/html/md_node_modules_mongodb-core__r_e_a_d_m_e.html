<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Camply: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="camply.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Camply
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Camply is a social platform that users can share their own experiences.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="http://travis-ci.org/mongodb-js/mongodb-core"></a> <a href="https://coveralls.io/github/mongodb-js/mongodb-core?branch=1.3"></a></p>
<h1>Description</h1>
<p>The MongoDB Core driver is the low level part of the 2.0 or higher MongoDB driver and is meant for library developers not end users. It does not contain any abstractions or helpers outside of the basic management of MongoDB topology connections, CRUD operations and authentication.</p>
<h2>MongoDB Node.JS Core Driver</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">what  </th><th class="markdownTableHeadNone">where   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">documentation  </td><td class="markdownTableBodyNone"><a href="http://mongodb.github.io/node-mongodb-native/">http://mongodb.github.io/node-mongodb-native/</a>   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">apidoc  </td><td class="markdownTableBodyNone"><a href="http://mongodb.github.io/node-mongodb-native/">http://mongodb.github.io/node-mongodb-native/</a>   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">source  </td><td class="markdownTableBodyNone"><a href="https://github.com/mongodb-js/mongodb-core">https://github.com/mongodb-js/mongodb-core</a>   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">mongodb  </td><td class="markdownTableBodyNone"><a href="http://www.mongodb.org/">http://www.mongodb.org/</a>   </td></tr>
</table>
<h3>Blogs of Engineers involved in the driver</h3>
<ul>
<li>Christian Kvalheim <a href="https://twitter.com/christkv"></a> <a href="http://christiankvalheim.com">http://christiankvalheim.com</a></li>
</ul>
<h3>Bugs / Feature Requests</h3>
<p>Think youâ€™ve found a bug? Want to see a new feature in node-mongodb-native? Please open a case in our issue management tool, JIRA:</p>
<ul>
<li>Create an account and login <a href="https://jira.mongodb.org">https://jira.mongodb.org</a>.</li>
<li>Navigate to the NODE project <a href="https://jira.mongodb.org/browse/NODE">https://jira.mongodb.org/browse/NODE</a>.</li>
<li>Click <b>Create Issue</b> - Please provide as much information as possible about the issue type and how to reproduce it.</li>
</ul>
<p>Bug reports in JIRA for all driver projects (i.e. NODE, PYTHON, CSHARP, JAVA) and the Core Server (i.e. SERVER) project are <b>public</b>.</p>
<h3>Questions and Bug Reports</h3>
<ul>
<li>mailing list: <a href="https://groups.google.com/forum/#!forum/node-mongodb-native">https://groups.google.com/forum/#!forum/node-mongodb-native</a></li>
<li>jira: <a href="http://jira.mongodb.org/">http://jira.mongodb.org/</a></li>
</ul>
<h3>Change Log</h3>
<p><a href="http://jira.mongodb.org/browse/NODE">http://jira.mongodb.org/browse/NODE</a></p>
<h1>QuickStart</h1>
<p>The quick start guide will show you how to set up a simple application using Core driver and MongoDB. It scope is only how to set up the driver and perform the simple crud operations. For more inn depth coverage we encourage reading the tutorials.</p>
<h2>Create the package.json file</h2>
<p>Let's create a directory where our application will live. In our case we will put this under our projects directory.</p>
<div class="fragment"><div class="line">mkdir myproject</div><div class="line">cd myproject</div></div><!-- fragment --><p>Create a <b>package.json</b> using your favorite text editor and fill it in.</p>
<div class="fragment"><div class="line">{</div><div class="line">  &quot;name&quot;: &quot;myproject&quot;,</div><div class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</div><div class="line">  &quot;description&quot;: &quot;My first project&quot;,</div><div class="line">  &quot;main&quot;: &quot;index.js&quot;,</div><div class="line">  &quot;repository&quot;: {</div><div class="line">    &quot;type&quot;: &quot;git&quot;,</div><div class="line">    &quot;url&quot;: &quot;git://github.com/christkv/myfirstproject.git&quot;</div><div class="line">  },</div><div class="line">  &quot;dependencies&quot;: {</div><div class="line">    &quot;mongodb-core&quot;: &quot;~1.0&quot;</div><div class="line">  },</div><div class="line">  &quot;author&quot;: &quot;Christian Kvalheim&quot;,</div><div class="line">  &quot;license&quot;: &quot;Apache 2.0&quot;,</div><div class="line">  &quot;bugs&quot;: {</div><div class="line">    &quot;url&quot;: &quot;https://github.com/christkv/myfirstproject/issues&quot;</div><div class="line">  },</div><div class="line">  &quot;homepage&quot;: &quot;https://github.com/christkv/myfirstproject&quot;</div><div class="line">}</div></div><!-- fragment --><p>Save the file and return to the shell or command prompt and use <b>NPM</b> to install all the dependencies.</p>
<div class="fragment"><div class="line">npm install</div></div><!-- fragment --><p>You should see <b>NPM</b> download a lot of files. Once it's done you'll find all the downloaded packages under the <b>node_modules</b> directory.</p>
<h2>Booting up a MongoDB Server </h2>
<p>Let's boot up a MongoDB server instance. Download the right MongoDB version from <a href="http://www.mongodb.org">MongoDB</a>, open a new shell or command line and ensure the <b>mongod</b> command is in the shell or command line path. Now let's create a database directory (in our case under **/data**).</p>
<div class="fragment"><div class="line">mongod --dbpath=/data --port 27017</div></div><!-- fragment --><p>You should see the <b>mongod</b> process start up and print some status information.</p>
<h2>Connecting to MongoDB</h2>
<p>Let's create a new <b>app.js</b> file that we will use to show the basic CRUD operations using the MongoDB driver.</p>
<p>First let's add code to connect to the server. Notice that there is no concept of a database here and we use the topology directly to perform the connection.</p>
<div class="fragment"><div class="line">var Server = require(&#39;mongodb-core&#39;).Server</div><div class="line">  , assert = require(&#39;assert&#39;);</div><div class="line"></div><div class="line">// Set up server connection</div><div class="line">var server = new Server({</div><div class="line">    host: &#39;localhost&#39;</div><div class="line">  , port: 27017</div><div class="line">  , reconnect: true</div><div class="line">  , reconnectInterval: 50</div><div class="line">});</div><div class="line"></div><div class="line">// Add event listeners</div><div class="line">server.on(&#39;connect&#39;, function(_server) {</div><div class="line">  console.log(&#39;connected&#39;);</div><div class="line">  test.done();</div><div class="line">});</div><div class="line"></div><div class="line">server.on(&#39;close&#39;, function() {</div><div class="line">  console.log(&#39;closed&#39;);</div><div class="line">});</div><div class="line"></div><div class="line">server.on(&#39;reconnect&#39;, function() {</div><div class="line">  console.log(&#39;reconnect&#39;);</div><div class="line">});</div><div class="line"></div><div class="line">// Start connection</div><div class="line">server.connect();</div></div><!-- fragment --><p>To connect to a replicaset we would use the <code>ReplSet</code> class and for a set of Mongos proxies we use the <code>Mongos</code> class. Each topology class offer the same CRUD operations and you operate on the topology directly. Let's look at an example exercising all the different available CRUD operations.</p>
<div class="fragment"><div class="line">var Server = require(&#39;mongodb-core&#39;).Server</div><div class="line">  , assert = require(&#39;assert&#39;);</div><div class="line"></div><div class="line">// Set up server connection</div><div class="line">var server = new Server({</div><div class="line">    host: &#39;localhost&#39;</div><div class="line">  , port: 27017</div><div class="line">  , reconnect: true</div><div class="line">  , reconnectInterval: 50</div><div class="line">});</div><div class="line"></div><div class="line">// Add event listeners</div><div class="line">server.on(&#39;connect&#39;, function(_server) {</div><div class="line">  console.log(&#39;connected&#39;);</div><div class="line"></div><div class="line">  // Execute the ismaster command</div><div class="line">  _server.command(&#39;system.$cmd&#39;, {ismaster: true}, function(err, result) {</div><div class="line"></div><div class="line">    // Perform a document insert</div><div class="line">    _server.insert(&#39;myproject.inserts1&#39;, [{a:1}, {a:2}], {</div><div class="line">      writeConcern: {w:1}, ordered:true</div><div class="line">    }, function(err, results) {</div><div class="line">      assert.equal(null, err);</div><div class="line">      assert.equal(2, results.result.n);      </div><div class="line"></div><div class="line">      // Perform a document update</div><div class="line">      _server.update(&#39;myproject.inserts1&#39;, [{</div><div class="line">        q: {a: 1}, u: {&#39;$set&#39;: {b:1}}</div><div class="line">      }], {</div><div class="line">        writeConcern: {w:1}, ordered:true</div><div class="line">      }, function(err, results) {</div><div class="line">        assert.equal(null, err);</div><div class="line">        assert.equal(1, results.result.n);</div><div class="line"></div><div class="line">        // Remove a document</div><div class="line">        _server.remove(&#39;myproject.inserts1&#39;, [{</div><div class="line">          q: {a: 1}, limit: 1</div><div class="line">        }], {</div><div class="line">          writeConcern: {w:1}, ordered:true</div><div class="line">        }, function(err, results) {</div><div class="line">          assert.equal(null, err);</div><div class="line">          assert.equal(1, results.result.n);</div><div class="line"></div><div class="line">          // Get a document</div><div class="line">          var cursor = _server.cursor(&#39;integration_tests.inserts_example4&#39;, {</div><div class="line">              find: &#39;integration_tests.example4&#39;</div><div class="line">            , query: {a:1}</div><div class="line">          });</div><div class="line"></div><div class="line">          // Get the first document</div><div class="line">          cursor.next(function(err, doc) {</div><div class="line">            assert.equal(null, err);</div><div class="line">            assert.equal(2, doc.a);</div><div class="line"></div><div class="line">            // Execute the ismaster command</div><div class="line">            _server.command(&quot;system.$cmd&quot;</div><div class="line">              , {ismaster: true}, function(err, result) {</div><div class="line">                assert.equal(null, err)</div><div class="line">                _server.destroy();              </div><div class="line">            });</div><div class="line">          });</div><div class="line">      });</div><div class="line">    });</div><div class="line"></div><div class="line">    test.done();</div><div class="line">  });</div><div class="line">});</div><div class="line"></div><div class="line">server.on(&#39;close&#39;, function() {</div><div class="line">  console.log(&#39;closed&#39;);</div><div class="line">});</div><div class="line"></div><div class="line">server.on(&#39;reconnect&#39;, function() {</div><div class="line">  console.log(&#39;reconnect&#39;);</div><div class="line">});</div><div class="line"></div><div class="line">// Start connection</div><div class="line">server.connect();</div></div><!-- fragment --><p>The core driver does not contain any helpers or abstractions only the core crud operations. These consist of the following commands.</p>
<ul>
<li><code>insert</code>, Insert takes an array of 1 or more documents to be inserted against the topology and allows you to specify a write concern and if you wish to execute the inserts in order or out of order.</li>
<li><code>update</code>, Update takes an array of 1 or more update commands to be executed against the server topology and also allows you to specify a write concern and if you wish to execute the updates in order or out of order.</li>
<li><code>remove</code>, Remove takes an array of 1 or more remove commands to be executed against the server topology and also allows you to specify a write concern and if you wish to execute the removes in order or out of order.</li>
<li><code>cursor</code>, Returns you a cursor for either the 'virtual' <code>find</code> command, a command that returns a cursor id or a plain cursor id. Read the cursor tutorial for more inn depth coverage.</li>
<li><code>command</code>, Executes a command against MongoDB and returns the result.</li>
<li><code>auth</code>, Authenticates the current topology using a supported authentication scheme.</li>
</ul>
<p>The Core Driver is a building block for library builders and is not meant for usage by end users as it lacks a lot of features the end user might need such as automatic buffering of operations when a primary is changing in a replicaset or the db and collections abstraction.</p>
<h2>Next steps</h2>
<p>The next step is to get more in depth information about how the different aspects of the core driver works and how to leverage them to extend the functionality of the cursors. Please view the tutorials for more detailed information. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
